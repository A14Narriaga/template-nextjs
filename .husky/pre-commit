#!/usr/bin/env sh

PRIMARY="95"
SECONDARY="93"
ERROR="91"
SUCCESS="92"

echoColorMsg() {
  local colorID=$1
  local msg=$2
  local color="\e[${colorID}m"
  local noColor="\e[0m"
  # local colorBold="\e[1;${colorID}m"
  echo "${color}${msg}${noColor}"
}

echoColorMsg $PRIMARY "Please wait, I need to review the project before sending these changes."
echoColorMsg $SECONDARY "1/5 ğŸ” Checking format..."
yarn format || (
  echoColorMsg $ERROR "âŒ Invalid format, please run 'yarn format:fix' or fix it manually."
  false;
)
echoColorMsg $SECONDARY "2/5 ğŸ” Checking lint..."
yarn lint || (
   echoColorMsg $ERROR "âŒ Invalid lint, please run 'yarn lint:fix' or fix it manually."
   false;
)
echoColorMsg $SECONDARY "3/5 ğŸ” Type checking..."
yarn type-check || (
   echoColorMsg $ERROR "âŒ Invalid types, please fix it."
   false;
)
echoColorMsg $SECONDARY "4/5 ğŸ” Testing..."
yarn test || (
   echoColorMsg $ERROR "âŒ Test failed, please fix it."
   false;
)
echoColorMsg $SECONDARY "5/5 ğŸ” Generating build..."
yarn build || (
echoColorMsg $ERROR "âŒ Build failed, please fix it."
  false;
) 
echoColorMsg $SUCCESS "âœ… Everything seems to be in order, let's send these changes."